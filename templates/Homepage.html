<!DOCTYPE html>
<html>

<head>
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Home</title>

	<link rel="stylesheet" href="http://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css">

	<link href="styles/css/homepage.css" rel="stylesheet">
<script src="/jsfiles/js/jquery.js"></script>
<script type="text/javascript">
	var page = 2;
	var flag = 0;
	function load_page()
	{
		var xhttp = new XMLHttpRequest();
		xhttp.onreadystatechange = function() {
		    if (this.readyState == XMLHttpRequest.DONE && this.status == 200) {
		       var response = xhttp.responseText
		    	if (!response){
		       		flag = 1;
				}
		    	else{
		       		document.getElementById("articles").innerHTML += xhttp.responseText;
		       		var selector = $("li.active");
					$('.pagination li').removeClass('active');
					selector.next().addClass('active');
		   		}
		    }
		};
		if(flag==0){
			var host = window.location.origin;
			xhttp.open("POST", host, true);
			xhttp.setRequestHeader("Content-type", "application/x-www-form-urlencoded");
			xhttp.send("page="+page); 
			page = page + 1;
		}
	};


</script>
</head> 
<body onload="load_page()">

	{% include 'navigationbar.html' %}


	<div class="container-fluid" id="articles">

		<div class="row">
			<div class = "col-lg-6">
				{% for article in data1 %}

				<div class = "big-box">


					<a href ="/news/{{article.key().id()}}">

						<img src = "{{article.picture}}"></a><h2><span>{{article.headline}}</span></h2>

					</div>
					{% endfor %}
				</div>
				<div class = "col-lg-6">
					<div class = "row">

						{% for article in data2 %}
						<div class = "col-lg-6">
							<div class = "small-box">


								<a href ="/news/{{article.key().id()}}">

									<img src = "{{article.picture}}"></a><h3><span>{{article.headline}}</span></h3>

								</div>
								</div>
								{% endfor %}
							</div><br>
							<div class = "row">

								{% for article in data3 %}
								<div class = "col-lg-6">
									<div class = "small-box">


										<a href ="/news/{{article.key().id()}}">

											<img src = "{{article.picture}}"></a><h3><span>{{article.headline}}</span></h3>

										</div> 
										</div>
										{% endfor %}
									</div>
									</div>

								</div>


							</div>

							<div class="text-center">
								<ul class="pagination">
								{% for i in range(1,total_pages+1) recursive %}
								{% if i==page %}
								<li class="active"><a href="/?page={{i}}">{{i}}</a></li>
								{% else %}
								<li><a href="/?page={{i}}">{{i}}</a></li>
								{% endif %}
								{% endfor %}
								</ul>
							</div>
							{% include 'footer.html' %} 
							<script>
								$('.carousel').carousel({
									interval: 3000
								})
								$(document).scroll(function(){
									if($(window).height() == ($(document).height() - $(window).scrollTop()))
									{
										load_page();
									}
								})
							</script>


						</body>
						</html>